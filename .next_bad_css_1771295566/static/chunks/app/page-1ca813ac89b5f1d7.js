(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2355:function(e,t,r){Promise.resolve().then(r.bind(r,8144))},8144:function(e,t,r){"use strict";r.d(t,{default:function(){return ec}});var l,i,s=r(7437),a=r(2265),n=r(7748),o=r.n(n),c=r(8124),d=r(9397),u=r(1047),m=r(7416),h=r(1349),x=r(7586);r(1322);let v={1:[-111.07,44.66],2:[-110.57,45.6],3:[-112.7,45.53],4:[-114.05,46.83],5:[-115.09,47.3],6:[-114.18,48.36],7:[-111.08,48.31],8:[-111.42,46.15],9:[-111.27,45.5],10:[-111.6,45.9],11:[-110.79,45.11],12:[-113.68,46.72],13:[-114.13,48.5],14:[-115.55,48.4],15:[-115.32,48.4],16:[-107.75,45.46],17:[-113.76,46.9]},p="GPfE5wv1XdVEF8YyaMfc",g=!!p,f=[{id:"dark",label:"Dark",styleUrl:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",defaultOn:!0,enabled:!0},{id:"light",label:"Light",styleUrl:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",enabled:!0},{id:"satellite",label:"Satellite",styleUrl:g?"https://api.maptiler.com/maps/satellite/style.json?key=".concat(p):void 0,enabled:g,comingSoon:!g},{id:"hybrid",label:"Hybrid",styleUrl:g?"https://api.maptiler.com/maps/hybrid/style.json?key=".concat(p):void 0,enabled:g,comingSoon:!g}],y=[{id:"statewide_hydrology",label:"Statewide hydrology",group:"MRI Overlays",defaultOn:!0,source:{id:"statewide-hydrology-source",type:"geojson",data:"https://hydro.nationalmap.gov/arcgis/rest/services/nhd/MapServer/2/query?where=1%3D1&geometry=-116.2,44.2,-104,49.2&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&outFields=GNIS_NAME&returnGeometry=true&geometryPrecision=4&maxAllowableOffset=0.005&f=geojson"},layers:["statewide-hydrology-line"],locked:!0},{id:"public_federal",label:"Federal",group:"Public Lands",defaultOn:!1,source:{id:"public-lands-federal-source",type:"raster",tiles:["https://gis.blm.gov/arcgis/rest/services/lands/BLM_Natl_SMA_Cached_without_PriUnk/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"BLM Surface Management Agency"},layers:["public-lands-federal-layer"],minZoomNote:"Visible at zoom 7+"},{id:"public_state",label:"State",group:"Public Lands",defaultOn:!1,source:{id:"public-lands-state-source",type:"none"},layers:[],comingSoon:!0},{id:"access_fishing_sites",label:"Fishing Access Sites (MT FWP)",group:"Access",defaultOn:!1,source:{id:"access-fishing-sites-source",type:"geojson",data:"https://fwp-gis.mt.gov/arcgis/rest/services/fwplnd/fwpLands/MapServer/1/query?where=1%3D1&outFields=NAME&returnGeometry=true&f=geojson"},layers:["access-fishing-sites-layer"]},{id:"mri_river_lines",label:"River lines",group:"MRI Overlays",defaultOn:!0,source:{id:"selected-river-source",type:"geojson"},layers:["selected-river-base"]},{id:"mri_selected_highlight",label:"Selected river highlight",group:"MRI Overlays",defaultOn:!0,source:{id:"selected-river-source",type:"geojson"},layers:["selected-river-casing","selected-river-main"]},{id:"mri_river_markers",label:"River markers",group:"MRI Overlays",defaultOn:!0,source:{id:"rivers-source",type:"geojson"},layers:["rivers-unclustered","rivers-selected-halo","rivers-selected-core"],locked:!0},{id:"mri_score_coloring",label:"Score coloring",group:"MRI Overlays",defaultOn:!1,source:{id:"rivers-source",type:"geojson"},layers:["rivers-unclustered"]},{id:"mri_labels",label:"Labels",group:"MRI Overlays",defaultOn:!0,source:{id:"basemap-style",type:"none"},layers:["selected-river-label"]}],b="mri.layers.v2",_=null!==(i=null===(l=f.find(e=>e.defaultOn))||void 0===l?void 0:l.id)&&void 0!==i?i:"dark";function j(){return y.reduce((e,t)=>(e[t.id]=t.defaultOn,e),{})}let w=["Public Lands","Access","MRI Overlays"],N="montana-river-map-labels";function L(){let e=localStorage.getItem(N);return null===e||"true"===e}function S(e){let{map:t}=e,[r,l]=(0,a.useState)(L);return(0,a.useEffect)(()=>{var e;if(!t)return;let l=null===(e=t.getStyle())||void 0===e?void 0:e.layers;if(Array.isArray(l))for(let e of l)e.id.toLowerCase().includes("label")&&t.setLayoutProperty(e.id,"visibility",r?"visible":"none")},[t,r]),(0,s.jsx)("div",{className:"pointer-events-none absolute right-3 bottom-3 z-30 flex flex-col gap-2 rounded-lg p-1.5",children:(0,s.jsxs)("label",{className:"pointer-events-auto flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer hover:bg-white/5 text-sm text-slate-200 bg-slate-900/90 backdrop-blur-sm border border-white/10",children:[(0,s.jsx)("input",{type:"checkbox",checked:r,onChange:()=>{let e=!r;l(e),localStorage.setItem(N,String(e))},className:"rounded border-slate-500 bg-slate-800 text-sky-500"}),"Labels"]})})}let k=[-110.9,46.9],M={HOT:"#dc2626",GOOD:"#16a34a",FAIR:"#ca8a04",TOUGH:"#64748b"},O="rivers-source",F="rivers-unclustered",R="rivers-selected-halo",C="rivers-selected-core",z="selected-river-source",A="selected-river-base",E="selected-river-casing",T="selected-river-main",G="selected-river-label",D="statewide-hydrology-source",I="statewide-hydrology-line",P="public-lands-federal-source",H="public-lands-federal-layer",B="access-fishing-sites-source",U="access-fishing-sites-layer";function Z(e){let t=[];for(let a of e){var r,l,i,s;let e=null!==(r=a.lat)&&void 0!==r?r:a.latitude,n=null!==(l=a.lng)&&void 0!==l?l:a.longitude,o=null!=e&&null!=n?[n,e]:v[a.river_id];o&&t.push({type:"Feature",geometry:{type:"Point",coordinates:o},properties:{river_id:a.river_id,river_name:a.river_name,bite_tier:null!==(i=a.bite_tier)&&void 0!==i?i:null,fishability_score:null!==(s=a.fishability_score_calc)&&void 0!==s?s:null}})}return{type:"FeatureCollection",features:t}}function W(e,t){var r;let l=Z(t),i=e.getSource(O);if(!i){e.addSource(O,{type:"geojson",data:l,cluster:!1,generateId:!0});return}null===(r=i.setData)||void 0===r||r.call(i,l)}function Y(e){e.getLayer(F)||e.addLayer({id:F,type:"circle",source:O,filter:["==",["geometry-type"],"Point"],paint:{"circle-color":["case",["==",["get","bite_tier"],"HOT"],M.HOT,["==",["get","bite_tier"],"GOOD"],M.GOOD,["==",["get","bite_tier"],"FAIR"],M.FAIR,["==",["get","bite_tier"],"TOUGH"],M.TOUGH,"#94a3b8"],"circle-radius":["case",["boolean",["feature-state","hover"],!1],8,6],"circle-stroke-color":"rgba(255,255,255,0.92)","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],2.5,2],"circle-opacity":.95}}),e.getLayer(R)||e.addLayer({id:R,type:"circle",source:O,filter:["==",["get","river_id"],"__none__"],paint:{"circle-color":"rgba(56, 189, 248, 0.30)","circle-radius":15}}),e.getLayer(C)||e.addLayer({id:C,type:"circle",source:O,filter:["==",["get","river_id"],"__none__"],paint:{"circle-color":"rgba(255,255,255,0.98)","circle-radius":6,"circle-stroke-color":"rgba(56, 189, 248, 0.98)","circle-stroke-width":2}})}function q(e,t,r,l){let i=null!=t?t:"__none__",s=r?"visible":"none";for(let t of[F,R,C])e.getLayer(t)&&e.setLayoutProperty(t,"visibility",s);if(e.getLayer(R)&&e.setFilter(R,["==",["get","river_id"],i]),e.getLayer(C)&&e.setFilter(C,["==",["get","river_id"],i]),!e.getLayer(F))return;let a=l?["case",["==",["get","bite_tier"],"HOT"],M.HOT,["==",["get","bite_tier"],"GOOD"],M.GOOD,["==",["get","bite_tier"],"FAIR"],M.FAIR,["==",["get","bite_tier"],"TOUGH"],M.TOUGH,"#94a3b8"]:"#94a3b8";e.setPaintProperty(F,"circle-color",a),e.setPaintProperty(F,"circle-opacity",t?["case",["==",["get","river_id"],t],.95,.38]:.95)}function J(e,t,r,l,i,s){var a;if(!t||!l&&!i){e.getLayer(G)&&e.removeLayer(G),e.getLayer(T)&&e.removeLayer(T),e.getLayer(E)&&e.removeLayer(E),e.getLayer(A)&&e.removeLayer(A),e.getSource(z)&&e.removeSource(z);return}let n=t?"FeatureCollection"===t.type||"Feature"===t.type?t:"LineString"===t.type||"MultiLineString"===t.type?{type:"Feature",properties:{},geometry:t}:t:null;if(!n)return;let o=function(e,t){if(!t)return e;if("Feature"===e.type){var r;return{...e,properties:{...null!==(r=e.properties)&&void 0!==r?r:{},name:t,river_name:t}}}return"FeatureCollection"===e.type?{...e,features:e.features.map(e=>{var r;return{...e,properties:{...null!==(r=e.properties)&&void 0!==r?r:{},name:t,river_name:t}}})}:{type:"Feature",properties:{name:t,river_name:t},geometry:e}}(n,r),c=e.getSource(z);c?null===(a=c.setData)||void 0===a||a.call(c,o):e.addSource(z,{type:"geojson",data:o}),l&&!e.getLayer(A)?e.addLayer({id:A,type:"line",source:z,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#4F6F7A","line-width":["interpolate",["linear"],["zoom"],6,2,10,2.8,12,3.4],"line-opacity":.9}}):!l&&e.getLayer(A)&&e.removeLayer(A),i&&!e.getLayer(E)?e.addLayer({id:E,type:"line",source:z,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#1E2E33","line-width":["interpolate",["linear"],["zoom"],6,4.4,10,5.8,12,6.6],"line-opacity":.95}}):!i&&e.getLayer(E)&&e.removeLayer(E),i&&!e.getLayer(T)?e.addLayer({id:T,type:"line",source:z,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#2F5D62","line-width":["interpolate",["linear"],["zoom"],6,3.2,10,4.4,12,5.2],"line-opacity":.98}}):!i&&e.getLayer(T)&&e.removeLayer(T),s&&!e.getLayer(G)?e.addLayer({id:G,type:"symbol",source:z,minzoom:8,layout:{"symbol-placement":"line","text-field":["coalesce",["get","name"],["get","river_name"],""],"text-size":["interpolate",["linear"],["zoom"],8,10,11,12,13,13]},paint:{"text-color":"rgba(236, 242, 247, 0.85)","text-halo-color":"rgba(30, 46, 51, 0.85)","text-halo-width":1}}):!s&&e.getLayer(G)&&e.removeLayer(G);try{e.getLayer(I)&&e.getLayer(A)&&e.moveLayer(A),e.getLayer(A)&&e.getLayer(F)&&e.moveLayer(A,F),e.getLayer(E)&&e.getLayer(F)&&e.moveLayer(E,F),e.getLayer(T)&&e.getLayer(F)&&e.moveLayer(T,F),e.getLayer(G)&&e.getLayer(F)&&e.moveLayer(G,F)}catch(e){}}function V(e,t){if(t){e.getSource(D)||e.addSource(D,{type:"geojson",data:"https://hydro.nationalmap.gov/arcgis/rest/services/nhd/MapServer/2/query?where=1%3D1&geometry=-116.2,44.2,-104,49.2&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&outFields=GNIS_NAME&returnGeometry=true&geometryPrecision=4&maxAllowableOffset=0.005&f=geojson"}),e.getLayer(I)||e.addLayer({id:I,type:"line",source:D,paint:{"line-color":"#2C3E44","line-width":["interpolate",["linear"],["zoom"],5,.35,8,.55,11,.9],"line-opacity":.7}});try{e.getLayer(A)?e.moveLayer(I,A):e.getLayer(F)&&e.moveLayer(I,F)}catch(e){}return}e.getLayer(I)&&e.removeLayer(I)}function X(e,t){if(t){e.getSource(P)||e.addSource(P,{type:"raster",tiles:["https://gis.blm.gov/arcgis/rest/services/lands/BLM_Natl_SMA_Cached_without_PriUnk/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"BLM Surface Management Agency"}),e.getLayer(H)||e.addLayer({id:H,type:"raster",source:P,minzoom:7,paint:{"raster-opacity":.24,"raster-saturation":-.55,"raster-contrast":-.2,"raster-brightness-min":.15,"raster-brightness-max":.82}});return}e.getLayer(H)&&e.removeLayer(H)}function K(e,t){if(t){e.getSource(B)||e.addSource(B,{type:"geojson",data:"https://fwp-gis.mt.gov/arcgis/rest/services/fwplnd/fwpLands/MapServer/1/query?where=1%3D1&outFields=NAME&returnGeometry=true&f=geojson"}),e.getLayer(U)||e.addLayer({id:U,type:"circle",source:B,paint:{"circle-color":"#38bdf8","circle-radius":4,"circle-stroke-color":"#e2e8f0","circle-stroke-width":1.25,"circle-opacity":.95}});return}e.getLayer(U)&&e.removeLayer(U)}function Q(e,t){var r;let l=e.getStyle(),i=t?"visible":"none";for(let t of null!==(r=l.layers)&&void 0!==r?r:[]){if(!t.id)continue;let r=t.id.toLowerCase();if(r.includes("label")||r.includes("place")||r.includes("poi"))try{e.setLayoutProperty(t.id,"visibility",i)}catch(e){}}}function $(e){let{rivers:t,selectedRiver:r,selectedRiverName:l,selectedRiverId:i,selectedRiverGeojson:n,layerState:c,onSelectRiver:d,className:u,initialStyleUrl:m,onMapReady:h}=e,x=null!=c?c:j(),p=(0,a.useRef)(null),g=(0,a.useRef)(null),f=(0,a.useRef)(t),y=(0,a.useRef)(d),b=(0,a.useRef)(l),_=(0,a.useRef)(i),w=(0,a.useRef)(n),N=(0,a.useRef)(x),L=(0,a.useRef)(null),M=(0,a.useRef)(null),[R,C]=(0,a.useState)(!1);f.current=t,y.current=d,b.current=l,_.current=i,w.current=n,N.current=x;let z=(0,a.useCallback)(e=>{W(e,f.current),Y(e),q(e,_.current,!0,N.current.mri_score_coloring),J(e,w.current,b.current,N.current.mri_river_lines,N.current.mri_selected_highlight,N.current.mri_labels),V(e,N.current.statewide_hydrology),X(e,N.current.public_federal),K(e,N.current.access_fishing_sites),Q(e,N.current.mri_labels)},[]),A=(0,a.useCallback)(()=>{if(!p.current)return;let e=new(o()).Map({container:p.current,style:null!=m?m:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",center:k,zoom:5.2,pitch:22,bearing:-5});e.addControl(new(o()).NavigationControl,"top-right"),g.current=e,e.on("load",()=>{C(!0),null==h||h(e),z(e),e.resize()}),e.__mriHandlers||(e.__mriHandlers=!0,e.on("click",F,e=>{var t,r;let l=null===(t=e.features)||void 0===t?void 0:t[0],i=null==l?void 0:null===(r=l.properties)||void 0===r?void 0:r.river_id;if(!i)return;let s=f.current.find(e=>e.river_id===i);s&&y.current(s)}),e.on("mousemove",F,t=>{var r;e.getCanvas().style.cursor="pointer";let l=null===(r=t.features)||void 0===r?void 0:r[0],i=null==l?void 0:l.id;if(null!=i){if(null!=L.current&&L.current!==i)try{e.setFeatureState({source:O,id:L.current},{hover:!1})}catch(e){}L.current=i;try{e.setFeatureState({source:O,id:i},{hover:!0})}catch(e){}}}),e.on("mouseleave",F,()=>{if(e.getCanvas().style.cursor="",null!=L.current)try{e.setFeatureState({source:O,id:L.current},{hover:!1})}catch(e){}L.current=null}))},[m,h,z]);(0,a.useEffect)(()=>(A(),()=>{var e;null===(e=g.current)||void 0===e||e.remove(),g.current=null,M.current=null}),[A]),(0,a.useEffect)(()=>{let e=g.current;if(!e||!p.current)return;let t=()=>e.resize();window.addEventListener("resize",t);let r=new ResizeObserver(()=>e.resize());return r.observe(p.current),()=>{window.removeEventListener("resize",t),r.disconnect()}},[R]);let E=t.map(e=>e.river_id).join(",");return(0,a.useEffect)(()=>{let e=g.current;if(e&&R&&("function"!=typeof e.isStyleLoaded||e.isStyleLoaded())&&(W(e,t),Y(e),q(e,i,!0,x.mri_score_coloring),!i)){let r=Z(t);if(r.features.length){let t=new(o()).LngLatBounds(r.features[0].geometry.coordinates,r.features[0].geometry.coordinates);for(let e of r.features)t.extend(e.geometry.coordinates);e.fitBounds(t,{padding:60,duration:450})}}},[E,R,t,i,x.mri_score_coloring]),(0,a.useEffect)(()=>{let e=g.current;if(!e||!R||"function"==typeof e.isStyleLoaded&&!e.isStyleLoaded())return;if(q(e,i,!0,x.mri_score_coloring),J(e,n,l,x.mri_river_lines,x.mri_selected_highlight,x.mri_labels),!i){M.current=null;return}if(M.current===i)return;M.current=i;let t=(null==r?void 0:r.lat)!=null&&(null==r?void 0:r.lng)!=null?[r.lng,r.lat]:v[i];if(n){let t=function(e){let t=[],r=e=>{if("Point"===e.type)t.push(e.coordinates);else if("LineString"===e.type)for(let r of e.coordinates)t.push(r);else if("MultiLineString"===e.type)for(let r of e.coordinates)for(let e of r)t.push(e);else if("Polygon"===e.type)for(let r of e.coordinates)for(let e of r)t.push(e);else if("MultiPoint"===e.type)for(let r of e.coordinates)t.push(r)};if("geometry"in e&&e.geometry)r(e.geometry);else if("coordinates"in e)r(e);else if("features"in e)for(let t of e.features)t.geometry&&r(t.geometry);if(!t.length)return null;let l=t.map(e=>e[0]),i=t.map(e=>e[1]);return[Math.min(...l),Math.min(...i),Math.max(...l),Math.max(...i)]}(n);if(t&&e.fitBounds){e.fitBounds([[t[0],t[1]],[t[2],t[3]]],{padding:60,duration:700,essential:!0});return}}t&&e.flyTo({center:t,zoom:9.5,duration:667,curve:1.5,essential:!0})},[i,n,r,x.mri_river_lines,x.mri_selected_highlight,x.mri_labels,x.mri_score_coloring,R]),(0,a.useEffect)(()=>{let e=g.current;e&&R&&("function"!=typeof e.isStyleLoaded||e.isStyleLoaded())&&(V(e,x.statewide_hydrology),X(e,x.public_federal),K(e,x.access_fishing_sites),Q(e,x.mri_labels))},[R,x.statewide_hydrology,x.public_federal,x.access_fishing_sites,x.mri_labels]),(0,a.useEffect)(()=>{let e=g.current;if(!e||!R)return;let t=()=>{z(e)};return e.on("load",t),()=>{e.off("load",t)}},[R,z]),(0,s.jsx)("div",{id:"map",ref:p,className:"absolute inset-0 h-full w-full min-h-0 [&_.maplibregl-marker]:cursor-pointer ".concat(null!=u?u:"").trim(),"aria-label":"Montana river map",children:R&&g.current&&(0,s.jsx)(S,{map:g.current})})}var ee=r(3053);let et="https://relkyvqwmfbmzzlqypmu.supabase.co",er="sb_publishable_PxejFrRRvhrHai_FtjAGoA_rlM9S9_e",el=et&&er?(0,ee.eI)(et,er):null;async function ei(e){var t;if(!el)return null;let{data:r,error:l}=await el.from("river_geoms").select("geom").eq("river_id",e).single();return l||!r?null:null!==(t=r.geom)&&void 0!==t?t:null}async function es(e){if(!e||!el)return null;let{data:t,error:r}=await el.rpc("get_river_geojson_by_slug",{p_slug:e});return r?(console.error("[fetchRiverGeojsonBrowser] rpc error:",r),null):null!=t?t:null}function ea(e,t,r){return Math.max(t,Math.min(r,e))}function en(e){let{tier:t}=e,r="Good"===t||"HOT"===t||"GOOD"===t?"bg-green-500":"Fair"===t||"FAIR"===t?"bg-yellow-500":"bg-slate-400";return(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 text-xs font-semibold text-white/90",children:[(0,s.jsx)("span",{className:"h-2.5 w-2.5 rounded-full ".concat(r)}),"HOT"===t||"GOOD"===t?"Good":"FAIR"===t?"Fair":"TOUGH"===t?"Tough":null!=t?t:"—"]})}function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||Number.isNaN(e)?"—":Number(e).toFixed(t)}function ec(e){var t,r,l,i,n,p,g,N;let{rivers:L,dateLabel:S=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}=e,[k,M]=(0,a.useState)(""),[O,F]=(0,a.useState)("All"),[R,C]=(0,a.useState)(null),[z,A]=(0,a.useState)(!0),[E,T]=(0,a.useState)(0),[G,D]=(0,a.useState)(!1),I=(0,a.useRef)(null),[P,H]=(0,a.useState)(null),B=(0,a.useRef)(null),[U,Z]=(0,a.useState)(!1),[W,Y]=(0,a.useState)(!1),[q,J]=(0,a.useState)(!1),[V,X]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(_),[ee,et]=(0,a.useState)(j()),er=(0,a.useMemo)(()=>Object.fromEntries(f.map(e=>[e.id,e])),[]),el=(0,a.useMemo)(()=>{let e=k.trim().toLowerCase();return(null!=L?L:[]).filter(t=>{var r,l;let i=!e||(null!==(r=t.river_name)&&void 0!==r?r:"").toLowerCase().includes(e)||(null!==(l=t.gauge_label)&&void 0!==l?l:"").toLowerCase().includes(e),s="HOT"===t.bite_tier||"GOOD"===t.bite_tier?"Good":"FAIR"===t.bite_tier?"Fair":"TOUGH"===t.bite_tier?"Tough":"";return i&&("All"===O||s===O)}).sort((e,t)=>{var r,l;return(null!==(r=t.fishability_score_calc)&&void 0!==r?r:-999)-(null!==(l=e.fishability_score_calc)&&void 0!==l?l:-999)})},[L,k,O]),ec=(0,a.useMemo)(()=>{var e,t;return R&&null!==(t=null!==(e=el.find(e=>e.river_id===R))&&void 0!==e?e:L.find(e=>e.river_id===R))&&void 0!==t?t:null},[el,L,R]),ed=(0,a.useMemo)(()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getMonth();return 11===t||t<=1?{season:"Winter",likelyBugs:"Midges, Blue-Winged Olives (low activity windows)",recommendedApproach:"Fish slow seams and tailouts with small nymphs or midge dries during warmest hours."}:t>=2&&t<=4?{season:"Spring",likelyBugs:"Skwala, Baetis, early caddis",recommendedApproach:"Target afternoon windows; mix dry-dropper with short nymph rigs as flows stabilize."}:t>=5&&t<=7?{season:"Summer",likelyBugs:"PMD, caddis, stoneflies, terrestrials",recommendedApproach:"Cover pocket water and banks with attractor dries, then switch to nymphs when surface slows."}:{season:"Fall",likelyBugs:"Baetis, mahogany duns, midges",recommendedApproach:"Fish midday hatches and focus on softer edges with emergers, small dries, and light nymph rigs."}})(),[]),eu=(0,a.useMemo)(()=>ec?function(e){var t,r,l;let i=e.flow_ratio_calc,s=e.change_48h_pct_calc,a=e.water_temp_f,n=null!=e.wind_am_mph&&null!=e.wind_pm_mph?(e.wind_am_mph+e.wind_pm_mph)/2:null!==(r=null!==(t=e.wind_am_mph)&&void 0!==t?t:e.wind_pm_mph)&&void 0!==r?r:null,o=null==i||i<=0?null:Math.round(ea(30-14*Math.abs(Math.log2(i)),0,30));return{flowScore:o,stabilityScore:null==s?null:Math.round(ea(25-.8*Math.abs(s),0,25)),thermalScore:null==a?null:Math.round(ea(25-1.2*Math.abs(a-56),0,25)),windPenalty:null==n?null:Math.round(ea(1.2*n,0,20)),totalScore:null!==(l=e.fishability_score_calc)&&void 0!==l?l:null}}(ec):null,[ec]),em=(0,a.useMemo)(()=>"Summer"===ed.season?"High":"Spring"===ed.season||"Fall"===ed.season?"Moderate":"Low",[ed.season]);(0,a.useEffect)(()=>{let e=!1;return(async function(){var t,r,l;if(!R){H(null);return}let i=null!==(t=el.find(e=>e.river_id===R))&&void 0!==t?t:L.find(e=>e.river_id===R),s=null!==(l=null!==(r=null==i?void 0:i.slug)&&void 0!==r?r:null==i?void 0:i.river_id)&&void 0!==l?l:R,a=await es(s);if(e)return;if(a){H(a);return}let n=await ei(R);e||H(n?{type:"Feature",geometry:n,properties:{river_id:R}}:null)})().catch(()=>{e||H(null)}),()=>{e=!0}},[R,el,L]),(0,a.useEffect)(()=>{if(ec){Z(!0);return}Z(!1),J(!1)},[ec]),(0,a.useEffect)(()=>{try{let e=localStorage.getItem(b);if(!e)return;let t=JSON.parse(e);if(t.basemap&&er[t.basemap]&&Q(t.basemap),t.layerState){let e={...j()};for(let r of y)"boolean"==typeof t.layerState[r.id]&&(e[r.id]=t.layerState[r.id]);et(e)}}catch(e){}},[er]),(0,a.useEffect)(()=>{try{localStorage.setItem(b,JSON.stringify({basemap:K,layerState:ee}))}catch(e){}},[K,ee]);let eh=null!==(r=null===(t=er[K])||void 0===t?void 0:t.styleUrl)&&void 0!==r?r:er[_].styleUrl;function ex(e){var t;let r="touches"in e?null===(t=e.touches[0])||void 0===t?void 0:t.clientY:e.clientY;if(null==r)return;I.current={startY:r,startSheetY:E},D(!0);let l=e=>{var t;let r="touches"in e?null===(t=e.touches[0])||void 0===t?void 0:t.clientY:e.clientY;if(null==r||!I.current)return;let l=r-I.current.startY;T(Math.max(0,Math.min(1,I.current.startSheetY+l/320)))},i=()=>{I.current&&(I.current=null,D(!1),T(e=>{let t=e>.45?1:0;return A(0===t),t}),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",i),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",i))};document.addEventListener("pointermove",l),document.addEventListener("pointerup",i),document.addEventListener("touchmove",l,{passive:!0}),document.addEventListener("touchend",i)}function ev(e,t){et(r=>({...r,[e]:t}))}let ep=(0,a.useMemo)(()=>w.map(e=>({group:e,layers:y.filter(t=>t.group===e)})),[]);return(0,s.jsxs)("div",{className:"relative h-[100dvh] w-full overflow-hidden bg-black",children:[(0,s.jsx)("div",{className:"absolute inset-0",children:(0,s.jsx)($,{rivers:el,selectedRiver:ec,selectedRiverName:null!==(l=null==ec?void 0:ec.river_name)&&void 0!==l?l:null,selectedRiverId:R,selectedRiverGeojson:P,layerState:ee,onSelectRiver:e=>C(e.river_id),className:"absolute inset-0",initialStyleUrl:eh,onMapReady:e=>{B.current=e}})}),(0,s.jsx)("div",{className:"absolute left-3 top-3 z-30 hidden sm:block",children:(0,s.jsxs)("div",{className:"onx-glass w-[84px] overflow-hidden rounded-2xl",children:[(0,s.jsxs)("div",{className:"border-b border-white/10 px-3 py-3",children:[(0,s.jsx)("div",{className:"text-sm font-semibold leading-tight text-white",children:"MRI"}),(0,s.jsx)("div",{className:"text-[10px] leading-tight text-white/70",children:"Montana"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-2",children:[(0,s.jsx)("button",{className:"onx-iconbtn",title:"Map",children:"\uD83D\uDDFA️"}),(0,s.jsx)("button",{className:"onx-iconbtn",title:"Rivers",children:"\uD83C\uDFA3"}),(0,s.jsx)("button",{className:"onx-iconbtn",title:"Reports",children:"\uD83D\uDCC4"}),(0,s.jsx)("button",{className:"onx-iconbtn ".concat(W?"ring-2 ring-cyan-300/60":""),title:"Layers",onClick:()=>Y(e=>!e),children:(0,s.jsx)(c.Z,{size:18,strokeWidth:2.5})})]})]})}),(0,s.jsx)("button",{className:"onx-iconbtn absolute bottom-24 right-3 z-30 sm:hidden",title:"Layers",onClick:()=>Y(e=>!e),children:(0,s.jsx)(c.Z,{size:18,strokeWidth:2.5})}),(0,s.jsxs)("div",{className:"absolute left-3 right-3 top-3 z-30 sm:left-[108px] sm:right-[240px]",children:[(0,s.jsxs)("div",{className:"onx-glass flex items-center gap-2 rounded-2xl px-3 py-2",children:[(0,s.jsxs)("div",{className:"hidden text-xs font-semibold text-white/80 sm:block",children:[S," • ",el.length," rivers"]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{value:k,onChange:e=>M(e.target.value),placeholder:"Search rivers...",className:"w-full bg-transparent text-sm text-white placeholder:text-white/60 outline-none"})}),(0,s.jsx)("button",{className:"rounded-lg px-2 py-1 text-xs text-white/80 hover:text-white",onClick:()=>{M(""),F("All"),C(null)},children:"Reset"})]}),(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:["All","Good","Fair","Tough"].map(e=>(0,s.jsx)("button",{onClick:()=>F(e),className:["h-9 rounded-full border px-3 text-sm font-medium backdrop-blur",O===e?"border-slate-200 bg-white/90 text-slate-900":"border-white/20 bg-slate-900/50 text-white hover:bg-slate-900/60"].join(" "),children:e},e))})]}),(0,s.jsxs)("div",{className:"absolute right-3 top-3 z-30 hidden flex-col gap-2 sm:flex",children:[(0,s.jsx)("button",{className:"onx-iconbtn",title:"Zoom in",onClick:function(){var e,t;null===(t=B.current)||void 0===t||null===(e=t.zoomIn)||void 0===e||e.call(t,{duration:180})},children:(0,s.jsx)(d.Z,{size:18,strokeWidth:2.5})}),(0,s.jsx)("button",{className:"onx-iconbtn",title:"Zoom out",onClick:function(){var e,t;null===(t=B.current)||void 0===t||null===(e=t.zoomOut)||void 0===e||e.call(t,{duration:180})},children:(0,s.jsx)(u.Z,{size:18,strokeWidth:2.5})}),(0,s.jsx)("button",{className:"onx-iconbtn",title:"Fit to rivers",onClick:function(){let e=B.current;if(!e||!el.length)return;let t=new(o()).LngLatBounds,r=!1;for(let e of el){var l,i;let s=null!==(l=e.lat)&&void 0!==l?l:e.latitude,a=null!==(i=e.lng)&&void 0!==i?i:e.longitude,n=null!=s&&null!=a?[a,s]:v[e.river_id];n&&(t.extend(n),r=!0)}r&&!t.isEmpty()&&e.fitBounds(t,{padding:60,duration:450,essential:!0})},children:(0,s.jsx)(m.Z,{size:18,strokeWidth:2.5})}),(0,s.jsx)("button",{className:"onx-iconbtn",title:"Recenter Montana",onClick:function(){var e,t;null===(t=B.current)||void 0===t||null===(e=t.flyTo)||void 0===e||e.call(t,{center:[-110.9,46.9],zoom:5.2,duration:450,essential:!0})},children:(0,s.jsx)(h.Z,{size:18,strokeWidth:2.5})}),(0,s.jsx)("button",{className:"onx-iconbtn",title:"Toggle river list",onClick:()=>{let e=!z;A(e),T(e?0:1)},children:(0,s.jsx)(x.Z,{size:18,strokeWidth:2.5})})]}),(0,s.jsx)("div",{className:["absolute left-3 top-16 z-40 w-[calc(100%-1rem)] sm:left-[108px] sm:top-[96px] sm:w-[360px]","transition-all duration-200",W?"translate-y-0 opacity-100":"pointer-events-none -translate-y-1 opacity-0"].join(" "),children:(0,s.jsxs)("div",{className:"onx-card rounded-2xl border border-slate-200/70 p-4 shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-slate-900",children:"Layers"}),(0,s.jsx)("div",{className:"text-[11px] text-slate-500",children:"Map display controls"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{className:"text-[11px] font-medium text-slate-500 hover:text-slate-700",onClick:function(){et(j()),Q(_)},children:"Reset layers"}),(0,s.jsx)("button",{className:"text-[11px] font-medium text-slate-500 hover:text-slate-700",onClick:()=>Y(!1),children:"Close"})]})]}),(0,s.jsx)("div",{className:"mt-4 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Basemap"}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-2",children:f.map(e=>{let t=K===e.id;return(0,s.jsxs)("button",{disabled:!e.enabled,className:["rounded-lg border px-2 py-1.5 text-xs font-medium",t?"border-slate-900 bg-slate-900 text-white":"border-slate-300 bg-white text-slate-700",e.enabled?"hover:bg-slate-50":"cursor-not-allowed opacity-55"].join(" "),onClick:()=>(function(e){var t,r,l,i;let s=er[e];if(!(null==s?void 0:s.enabled)||!s.styleUrl)return;Q(e);let a=B.current;if(!a)return;let n=null===(t=a.getCenter)||void 0===t?void 0:t.call(a),o=null===(r=a.getZoom)||void 0===r?void 0:r.call(a),c=null===(l=a.getBearing)||void 0===l?void 0:l.call(a),d=null===(i=a.getPitch)||void 0===i?void 0:i.call(a);a.setStyle(s.styleUrl),a.once("load",()=>{var e;try{n&&a.setCenter(n),null!=o&&a.setZoom(o),null!=c&&a.setBearing(c),null!=d&&a.setPitch(d)}catch(e){}null===(e=a.resize)||void 0===e||e.call(a)})})(e.id),children:[(0,s.jsx)("div",{children:e.label}),!e.enabled&&e.comingSoon?(0,s.jsx)("div",{className:"text-[10px] text-slate-500",children:"Coming soon"}):null]},e.id)})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Core Layers"}),(0,s.jsx)("div",{className:"mt-2 space-y-2 rounded-xl border border-slate-200 bg-slate-50/80 p-2.5 text-xs text-slate-700",children:ep.flatMap(e=>e.layers).filter(e=>"mri_river_lines"===e.id||"mri_selected_highlight"===e.id).map(e=>(0,s.jsxs)("label",{className:"flex items-start justify-between gap-3",children:[(0,s.jsx)("span",{className:"leading-tight",children:(0,s.jsx)("span",{className:"block",children:e.label})}),(0,s.jsx)("input",{type:"checkbox",checked:ee[e.id],onChange:t=>ev(e.id,t.target.checked)})]},e.id))})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{className:"w-full rounded-lg border border-slate-200 bg-white px-2.5 py-2 text-left text-xs font-medium text-slate-700 hover:bg-slate-50",onClick:()=>X(e=>!e),children:V?"Hide Advanced Layers":"Advanced Layers"})}),V?ep.map(e=>{let{group:t,layers:r}=e;return(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:t}),(0,s.jsx)("div",{className:"mt-2 space-y-2 rounded-xl border border-slate-200 bg-slate-50/80 p-2.5 text-xs text-slate-700",children:r.filter(e=>!e.locked&&"mri_river_lines"!==e.id&&"mri_selected_highlight"!==e.id).map(e=>{let t=ee[e.id],r=!!e.comingSoon;return(0,s.jsxs)("label",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("span",{className:"leading-tight",children:[(0,s.jsx)("span",{className:"block",children:e.label}),e.minZoomNote?(0,s.jsx)("span",{className:"text-[10px] text-slate-500",children:e.minZoomNote}):null,e.comingSoon?(0,s.jsx)("span",{className:"text-[10px] text-slate-500",children:"Coming soon"}):null]}),(0,s.jsx)("input",{type:"checkbox",checked:t,disabled:r,onChange:t=>ev(e.id,t.target.checked)})]},e.id)})})]},t)}):null]})}),(0,s.jsx)("div",{className:"absolute right-3 top-[120px] z-30 hidden w-[280px] sm:block",children:U?(0,s.jsxs)("div",{className:"onx-card rounded-2xl p-4 shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"River Detail"}),(0,s.jsx)("button",{className:"text-[11px] text-slate-500 hover:text-slate-700",onClick:()=>Z(!1),children:"Collapse"})]}),ec?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-2 text-[15px] font-semibold text-slate-900",children:ec.river_name}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:null!==(i=ec.gauge_label)&&void 0!==i?i:""}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(en,{tier:"HOT"===ec.bite_tier||"GOOD"===ec.bite_tier?"Good":"FAIR"===ec.bite_tier?"Fair":"TOUGH"===ec.bite_tier?"Tough":void 0})}),(0,s.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-500",children:"Score"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:null!==(n=ec.fishability_score_calc)&&void 0!==n?n:"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-500",children:"Flow"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:null!==(p=ec.flow_cfs)&&void 0!==p?p:"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-500",children:"Temp"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:null!=ec.water_temp_f?"".concat(Number(ec.water_temp_f).toFixed(1),"\xb0F"):"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-500",children:"Stability"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:null==ec.change_48h_pct_calc?"—":"".concat(Number(ec.change_48h_pct_calc).toFixed(1),"% 48h")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-500",children:"Ratio"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:null!=ec.flow_ratio_calc?"".concat(Number(ec.flow_ratio_calc).toFixed(2),"x"):"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-500",children:"Hatch likelihood"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:em})]})]}),(0,s.jsxs)("div",{className:"mt-2 text-[11px] text-slate-600",children:["Wind AM ",null!==(g=ec.wind_am_mph)&&void 0!==g?g:"—"," • PM ",null!==(N=ec.wind_pm_mph)&&void 0!==N?N:"—"]}),(0,s.jsx)("div",{className:"my-3 h-px bg-slate-200/80"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:["Seasonal Intel (",ed.season,")"]}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-slate-700",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Likely bugs:"})," ",ed.likelyBugs]}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-slate-700",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Recommended approach:"})," ",ed.recommendedApproach]})]}),(0,s.jsx)("button",{className:"mt-3 w-full rounded-lg border border-slate-200/80 bg-white/70 px-2 py-1.5 text-left text-xs font-medium text-slate-700 hover:bg-slate-50",onClick:()=>J(e=>!e),children:"How this score is calculated"}),q&&eu?(0,s.jsxs)("div",{className:"mt-2 rounded-lg bg-slate-50/70 p-2 text-[11px] text-slate-700",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:[(0,s.jsx)("div",{children:"Flow Score"}),(0,s.jsx)("div",{className:"text-right font-semibold",children:eo(eu.flowScore)}),(0,s.jsx)("div",{children:"Stability Score"}),(0,s.jsx)("div",{className:"text-right font-semibold",children:eo(eu.stabilityScore)}),(0,s.jsx)("div",{children:"Thermal Score"}),(0,s.jsx)("div",{className:"text-right font-semibold",children:eo(eu.thermalScore)}),(0,s.jsx)("div",{children:"Wind Penalty"}),(0,s.jsx)("div",{className:"text-right font-semibold",children:eo(eu.windPenalty)}),(0,s.jsx)("div",{className:"border-t border-slate-200 pt-1 font-semibold",children:"Total Score"}),(0,s.jsx)("div",{className:"border-t border-slate-200 pt-1 text-right font-semibold",children:eo(eu.totalScore)})]}),(0,s.jsxs)("div",{className:"mt-2 border-t border-slate-200 pt-2",children:[(0,s.jsx)("div",{className:"mb-1 text-[10px] font-semibold uppercase tracking-wide text-slate-500",children:"Raw inputs"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:[(0,s.jsx)("div",{children:"Flow cfs"}),(0,s.jsx)("div",{className:"text-right",children:eo(ec.flow_cfs)}),(0,s.jsx)("div",{children:"Median flow"}),(0,s.jsx)("div",{className:"text-right",children:eo(ec.median_flow_cfs)}),(0,s.jsx)("div",{children:"Ratio"}),(0,s.jsxs)("div",{className:"text-right",children:[eo(ec.flow_ratio_calc,2),"x"]}),(0,s.jsx)("div",{children:"48h change"}),(0,s.jsxs)("div",{className:"text-right",children:[eo(ec.change_48h_pct_calc,1),"%"]}),(0,s.jsx)("div",{children:"Temp"}),(0,s.jsxs)("div",{className:"text-right",children:[eo(ec.water_temp_f,1),"\xb0F"]}),(0,s.jsx)("div",{children:"Wind AM / PM"}),(0,s.jsxs)("div",{className:"text-right",children:[eo(ec.wind_am_mph)," / ",eo(ec.wind_pm_mph)]})]}),(0,s.jsx)("div",{className:"mt-2 text-[10px] text-slate-500",children:"Components are estimated from current telemetry values; total score is the live MRI score."})]})]}):null]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:"Montana River Intel"}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:"Tap a river in the list to preview details here."})]})]}):(0,s.jsx)("button",{className:"onx-glass rounded-xl px-3 py-2 text-xs font-medium text-white/90 hover:text-white",onClick:()=>Z(!0),children:"Details"})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-30",style:{transform:"translateY(".concat((z?E:Math.max(E,.75))*78,"%)"),transition:G?"none":"transform 180ms ease-out"},children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-3 pb-3",children:(0,s.jsxs)("div",{className:"onx-glass overflow-hidden rounded-3xl shadow-2xl",children:[(0,s.jsx)("div",{className:"mx-auto mt-2 h-1.5 w-12 flex-shrink-0 cursor-grab rounded-full bg-white/25 active:cursor-grabbing",onPointerDown:ex,onTouchStart:ex,title:"Drag to expand/collapse"}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 pt-3",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold text-white",children:["Rivers (",el.length,")"]}),(0,s.jsx)("button",{className:"text-xs text-white/80 hover:text-white",onClick:()=>{let e=!z;A(e),T(e?0:1)},children:z?"Collapse":"Expand"})]}),(0,s.jsx)("div",{className:"px-3 pb-3 pt-2",children:(0,s.jsxs)("div",{className:"max-h-[34vh] overflow-auto pr-1",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:el.map(e=>{var t,r,l;return(0,s.jsx)("button",{onClick:()=>C(e.river_id),className:["rounded-2xl border text-left transition",e.river_id===R?"border-white/45 bg-white/15":"border-white/15 bg-white/5 hover:border-white/25"].join(" "),children:(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-white",children:e.river_name}),(0,s.jsx)("div",{className:"text-xs text-white/70",children:null!==(t=e.gauge_label)&&void 0!==t?t:""})]}),(0,s.jsx)(en,{tier:"HOT"===e.bite_tier||"GOOD"===e.bite_tier?"Good":"FAIR"===e.bite_tier?"Fair":"TOUGH"===e.bite_tier?"Tough":void 0})]}),(0,s.jsxs)("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs text-white/85",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white/60",children:"Score"}),(0,s.jsx)("div",{className:"font-semibold",children:null!==(r=e.fishability_score_calc)&&void 0!==r?r:"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white/60",children:"Flow"}),(0,s.jsx)("div",{className:"font-semibold",children:null!==(l=e.flow_cfs)&&void 0!==l?l:"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white/60",children:"Temp"}),(0,s.jsx)("div",{className:"font-semibold",children:null!=e.water_temp_f?"".concat(Number(e.water_temp_f).toFixed(1),"\xb0"):"—"})]})]})]})},e.river_id)})}),0===el.length?(0,s.jsx)("div",{className:"px-2 py-6 text-center text-sm text-white/70",children:"No rivers match your search/filter."}):null]})})]})})})]})}}},function(e){e.O(0,[932,402,93,971,117,744],function(){return e(e.s=2355)}),_N_E=e.O()}]);